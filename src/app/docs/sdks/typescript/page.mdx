import { Badge } from "@/components/ui/badge";
import { Card, CardContent } from "@/components/ui/card";

export const metadata = {
    title: "TypeScript SDK",
};

<div className="flex items-center gap-2">
    <h1 className="text-3xl font-bold tracking-tight">TypeScript SDK</h1>
    <Badge variant="secondary">Beta</Badge>
</div>

Define and manage your C4 architecture models programmatically using TypeScript.

---

## Installation

```bash title="terminal"
npm install @anthropic/frain-sdk
# or
bun add @anthropic/frain-sdk
```

## Authentication

Configure the SDK with your API token. You can generate a token from your account settings in the Frain dashboard.

```typescript title="config.ts"
import { FrainClient } from "@anthropic/frain-sdk";

const client = new FrainClient({
    apiKey: process.env.FRAIN_API_KEY,
    baseUrl: "https://api.frain.dev", // optional, defaults to production
});
```

## Quick Example

Here's a complete example of defining a workspace, creating a model, and pushing it to Frain:

```typescript title="example.ts"
import { FrainClient, Workspace } from "@anthropic/frain-sdk";

const client = new FrainClient({
    apiKey: process.env.FRAIN_API_KEY,
});

// Create a workspace
const workspace = new Workspace("E-Commerce Platform");

// Define software systems
const storefront = workspace.addSoftwareSystem(
    "Storefront",
    "Customer-facing web application"
);

const api = workspace.addSoftwareSystem(
    "API Gateway",
    "Routes requests to microservices"
);

const payments = workspace.addSoftwareSystem(
    "Payment Service",
    "Handles payment processing"
);

const database = workspace.addSoftwareSystem(
    "Database",
    "PostgreSQL data store"
);

// Define relationships
storefront.uses(api, "REST/JSON");
api.uses(payments, "gRPC");
api.uses(database, "SQL");

// Push to Frain
await client.projects.push("org-id", "project-id", workspace);
console.log("Model pushed successfully!");
```

## API Reference

<div className="grid gap-3 sm:grid-cols-2">
    <Card>
        <CardContent className="space-y-1">
            <h3 className="text-sm font-semibold">FrainClient</h3>
            <p className="text-xs text-muted-foreground">
                Main client for interacting with the Frain API. Handles authentication and request management.
            </p>
        </CardContent>
    </Card>
    <Card>
        <CardContent className="space-y-1">
            <h3 className="text-sm font-semibold">Workspace</h3>
            <p className="text-xs text-muted-foreground">
                Root container for your C4 model. Holds all software systems, people, and relationships.
            </p>
        </CardContent>
    </Card>
    <Card>
        <CardContent className="space-y-1">
            <h3 className="text-sm font-semibold">SoftwareSystem</h3>
            <p className="text-xs text-muted-foreground">
                Represents a software system in your architecture. Can contain containers and components.
            </p>
        </CardContent>
    </Card>
    <Card>
        <CardContent className="space-y-1">
            <h3 className="text-sm font-semibold">Container</h3>
            <p className="text-xs text-muted-foreground">
                A deployable unit within a software system (e.g., web app, API, database).
            </p>
        </CardContent>
    </Card>
</div>

## CI/CD Integration

Use the SDK in your CI/CD pipeline to keep diagrams in sync with your codebase. Here's a GitHub Actions example:

```yaml title=".github/workflows/frain.yml"
name: Update Architecture Diagrams
on:
  push:
    branches: [main]
    paths: ["architecture/**"]

jobs:
  update-diagrams:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: oven-sh/setup-bun@v2
      - run: bun install
      - run: bun run architecture/push.ts
        env:
          FRAIN_API_KEY: ${{ secrets.FRAIN_API_KEY }}
```
